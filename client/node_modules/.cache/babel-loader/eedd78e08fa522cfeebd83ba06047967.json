{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\JavascriptProjects3\\\\instagramClone\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\JavascriptProjects3\\\\instagramClone\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:\\\\JavascriptProjects3\\\\instagramClone\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\JavascriptProjects3\\\\instagramClone\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\JavascriptProjects3\\\\instagramClone\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\JavascriptProjects3\\\\instagramClone\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component,Fragment}from'react';import{post}from'axios';import*as PostUtils from'../../../utils/post-utils';import MaterialIcon from'../../others/icons/material-icon';var PostLike=/*#__PURE__*/function(_Component){_inherits(PostLike,_Component);var _super=_createSuper(PostLike);function PostLike(){var _this;_classCallCheck(this,PostLike);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={liked:false};_this.componentDidMount=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var post_id,_yield$post,liked;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:post_id=_this.props.postDetails.post_id;_context.next=3;return post('/api/liked-or-not',{post_id:post_id});case 3:_yield$post=_context.sent;liked=_yield$post.data;_context.next=7;return _this.setState({liked:liked});case 7:case\"end\":return _context.stop();}}},_callee);}));_this.like=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _this$props,_this$props$postDetai,post_id,user,incrementWhat;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this$props=_this.props,_this$props$postDetai=_this$props.postDetails,post_id=_this$props$postDetai.post_id,user=_this$props$postDetai.user,incrementWhat=_this$props.incrementWhat;PostUtils.like({post_id:post_id,user:user,done:function done(){_this.setState({liked:true});incrementWhat('likes_count');}});case 2:case\"end\":return _context2.stop();}}},_callee2);}));_this.unlike=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var _this$props$postDetai2,post_id,decrementWhat;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_this$props$postDetai2=_this.props.postDetails,post_id=_this$props$postDetai2.post_id,decrementWhat=_this$props$postDetai2.decrementWhat;PostUtils.unlike({post_id:post_id,done:function done(){_this.setState({liked:false});decrementWhat('likes_count');}});case 2:case\"end\":return _context3.stop();}}},_callee3);}));return _this;}_createClass(PostLike,[{key:\"render\",value:function render(){var liked=this.state.liked;return/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"p_like_wra\"},liked?/*#__PURE__*/React.createElement(\"span\",{className:\"p_like p_unlike_icon\",\"data-tip\":\"Unlike\",onClick:this.unlike},/*#__PURE__*/React.createElement(MaterialIcon,{icon:\"favourite\"})):/*#__PURE__*/React.createElement(\"span\",{className:\"p_like p_like_icon\",onClick:this.like,\"data-tip\":\"Like\"},/*#__PURE__*/React.createElement(MaterialIcon,{icon:\"favourite_border\"}))));}}]);return PostLike;}(Component);export{PostLike as default};","map":{"version":3,"sources":["C:/JavascriptProjects3/instagramClone/client/src/components/post/like/post-like.js"],"names":["React","Component","Fragment","post","PostUtils","MaterialIcon","PostLike","state","liked","componentDidMount","post_id","props","postDetails","data","setState","like","user","incrementWhat","done","unlike","decrementWhat"],"mappings":"++BAAC,MAAOA,CAAAA,KAAP,EAAcC,SAAd,CAAwBC,QAAxB,KAAuC,OAAvC,CACA,OAAQC,IAAR,KAAmB,OAAnB,CACA,MAAO,GAAKC,CAAAA,SAAZ,KAA2B,2BAA3B,CACA,MAAOC,CAAAA,YAAP,KAAyB,kCAAzB,C,GAGqBC,CAAAA,Q,mUAClBC,K,CAAQ,CAAEC,KAAK,CAAE,KAAT,C,OAERC,iB,sEAAoB,iKACEC,OADF,CACc,MAAKC,KADnB,CACXC,WADW,CACEF,OADF,uBAEUP,CAAAA,IAAI,CAAC,mBAAD,CAAqB,CAACO,OAAO,CAAPA,OAAD,CAArB,CAFd,kCAELF,KAFK,aAEXK,IAFW,uBAGV,OAAKC,QAAL,CAAc,CAAEN,KAAK,CAALA,KAAF,CAAd,CAHU,uD,SAMpBO,I,sEAAO,qNACgD,MAAKJ,KADrD,mCACEC,WADF,CACgBF,OADhB,uBACgBA,OADhB,CACwBM,IADxB,uBACwBA,IADxB,CAC+BC,aAD/B,aAC+BA,aAD/B,CAEHb,SAAS,CAACW,IAAV,CAAe,CACVL,OAAO,CAAPA,OADU,CAEVM,IAAI,CAAJA,IAFU,CAGVE,IAAI,CAAE,eAAM,CACR,MAAKJ,QAAL,CAAc,CAAEN,KAAK,CAAE,IAAT,CAAd,EACAS,aAAa,CAAC,aAAD,CAAb,CACH,CANS,CAAf,EAFG,wD,SAYPE,M,sEAAS,gNACwC,MAAKR,KAD7C,CACAC,WADA,CACcF,OADd,wBACcA,OADd,CACsBU,aADtB,wBACsBA,aADtB,CAELhB,SAAS,CAACe,MAAV,CAAiB,CACbT,OAAO,CAAPA,OADa,CAEbQ,IAAI,CAAE,eAAM,CACR,MAAKJ,QAAL,CAAc,CAAEN,KAAK,CAAE,KAAT,CAAd,EACAY,aAAa,CAAC,aAAD,CAAb,CACH,CALY,CAAjB,EAFK,wD,6EAWD,IACCZ,CAAAA,KADD,CACU,KAAKD,KADf,CACCC,KADD,CAGJ,mBACI,oBAAC,QAAD,mBACI,2BAAK,SAAS,CAAC,YAAf,EACKA,KAAK,cACF,4BAAM,SAAS,CAAC,sBAAhB,CAAuC,WAAS,QAAhD,CAAyD,OAAO,CAAE,KAAKW,MAAvE,eACI,oBAAC,YAAD,EAAc,IAAI,CAAC,WAAnB,EADJ,CADE,cAKF,4BAAM,SAAS,CAAC,oBAAhB,CAAqC,OAAO,CAAE,KAAKJ,IAAnD,CAAyD,WAAS,MAAlE,eACI,oBAAC,YAAD,EAAc,IAAI,CAAC,kBAAnB,EADJ,CANR,CADJ,CADJ,CAeH,C,sBAlDkCd,S,SAAjBK,Q","sourcesContent":[" import React,{Component,Fragment} from 'react';\r\n import {post} from 'axios';\r\n import * as PostUtils from '../../../utils/post-utils';\r\n import MaterialIcon from '../../others/icons/material-icon'\r\n import {number,func,shape} from 'prop-types';\r\n\r\n export default class PostLike extends Component {\r\n    state = { liked: false }\r\n\r\n    componentDidMount = async () => {\r\n        let {postDetails:{post_id}} = this.props;\r\n        let {data: liked} = await post('/api/liked-or-not',{post_id})\r\n        await this.setState({ liked })\r\n    }\r\n\r\n    like = async () => {\r\n        let {postDetails: {post_id,user}, incrementWhat} = this.props;\r\n        PostUtils.like({\r\n             post_id,\r\n             user,\r\n             done: () => {\r\n                 this.setState({ liked: true })\r\n                 incrementWhat('likes_count')\r\n             }\r\n        })\r\n    }\r\n\r\n    unlike = async () => {\r\n        let {postDetails: {post_id,decrementWhat}} = this.props;\r\n        PostUtils.unlike({\r\n            post_id,\r\n            done: () => {\r\n                this.setState({ liked: false })\r\n                decrementWhat('likes_count')\r\n            }\r\n        })\r\n    }\r\n\r\n    render(){\r\n        let {liked} = this.state;\r\n\r\n        return (\r\n            <Fragment>\r\n                <div className=\"p_like_wra\">\r\n                    {liked ? (\r\n                        <span className=\"p_like p_unlike_icon\" data-tip=\"Unlike\" onClick={this.unlike}>\r\n                            <MaterialIcon icon=\"favourite\" />\r\n                        </span>\r\n                    ) : (\r\n                        <span className=\"p_like p_like_icon\" onClick={this.like} data-tip=\"Like\">\r\n                            <MaterialIcon icon=\"favourite_border\" />\r\n                        </span>\r\n                    )}\r\n                </div>\r\n            </Fragment>\r\n        )\r\n    }\r\n }\r\n\r\n PostLike.propTypes = {\r\n     postDetails: shape({\r\n         post_id: number.isRequired,\r\n         user: number.isRequired\r\n        }).isRequired,\r\n     incrementWhat: func.isRequired,\r\n     decrementWhat: func.isRequired    \r\n }"]},"metadata":{},"sourceType":"module"}