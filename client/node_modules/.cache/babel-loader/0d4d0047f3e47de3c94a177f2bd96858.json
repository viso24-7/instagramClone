{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\JavascriptProjects3\\\\instagramClone\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\JavascriptProjects3\\\\instagramClone\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:\\\\JavascriptProjects3\\\\instagramClone\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\JavascriptProjects3\\\\instagramClone\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\JavascriptProjects3\\\\instagramClone\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\JavascriptProjects3\\\\instagramClone\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component,Fragment}from'react';import{connect}from'react-redux';import{post}from'axios';import{deleteComment}from'../../../../../actions/post';import{isAdmin}from'../../../../../utils/admin-utils';import{notify}from'../../../../../utils/utilMethods/handy-notification';import Prompt from'../../../../others/prompt';var DeleteCommentOption=/*#__PURE__*/function(_Component){_inherits(DeleteCommentOption,_Component);var _super=_createSuper(DeleteCommentOption);function DeleteCommentOption(){var _this;_classCallCheck(this,DeleteCommentOption);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={deleteComment:false};_this.showPrompt=function(e){e.preventDefault();_this.setState({deleteComment:true});};_this.delComment=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var _this$props,_this$props$commentDe,comment_id,type,commentSrc,dispatch,decrementComments;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_this$props=_this.props,_this$props$commentDe=_this$props.commentDetails,comment_id=_this$props$commentDe.comment_id,type=_this$props$commentDe.type,commentSrc=_this$props$commentDe.commentSrc,dispatch=_this$props.dispatch,decrementComments=_this$props.decrementComments;_context.next=4;return post('/api/delete-comment',{comment_id:comment_id,type:type,commentSrc:commentSrc});case 4:dispatch(deleteComment(comment_id));decrementComments();notify({value:'Comment deleted'});case 7:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.modalBack=function(){_this.props.toggleOptions();_this.setState({deleteComment:false});};return _this;}_createClass(DeleteCommentOption,[{key:\"render\",value:function render(){var deleteComment=this.state.deleteComment;return/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"a\",{href:\"#\",onClick:this.showPrompt},\"Delete comment \".concat(isAdmin()?'as admin':''))),deleteComment&&/*#__PURE__*/React.createElement(Prompt,{title:\"delete comment\",content:\"This comment will be deleted.There's no undo so you wont be able to find it\",actionText:\"Delete\",action:this.delComment,back:this.modalBack}));}}]);return DeleteCommentOption;}(Component);export default connect()(DeleteCommentOption);export{DeleteCommentOption as PureDeleteCommentOption};","map":{"version":3,"sources":["C:/JavascriptProjects3/instagramClone/client/src/components/post/comment/comments/options/delete-comment-option.js"],"names":["React","Component","Fragment","connect","post","deleteComment","isAdmin","notify","Prompt","DeleteCommentOption","state","showPrompt","e","preventDefault","setState","delComment","props","commentDetails","comment_id","type","commentSrc","dispatch","decrementComments","value","modalBack","toggleOptions","PureDeleteCommentOption"],"mappings":"++BAAC,MAAOA,CAAAA,KAAP,EAAcC,SAAd,CAAwBC,QAAxB,KAAuC,OAAvC,CACA,OAAQC,OAAR,KAAsB,aAAtB,CACA,OAAQC,IAAR,KAAmB,OAAnB,CACA,OAAQC,aAAR,KAA4B,6BAA5B,CACA,OAAQC,OAAR,KAAsB,kCAAtB,CACA,OAAQC,MAAR,KAAqB,qDAArB,CACA,MAAOC,CAAAA,MAAP,KAAmB,2BAAnB,C,GAGMC,CAAAA,mB,+WACFC,K,CAAQ,CAAEL,aAAa,CAAE,KAAjB,C,OAERM,U,CAAa,SAAAC,CAAC,CAAI,CACdA,CAAC,CAACC,cAAF,GACA,MAAKC,QAAL,CAAc,CAAET,aAAa,CAAE,IAAjB,CAAd,EACH,C,OAEDU,U,0FAAa,iBAAMH,CAAN,8MACVA,CAAC,CAACC,cAAF,GADU,YAEqE,MAAKG,KAF1E,mCAELC,cAFK,CAEWC,UAFX,uBAEWA,UAFX,CAEsBC,IAFtB,uBAEsBA,IAFtB,CAE2BC,UAF3B,uBAE2BA,UAF3B,CAEuCC,QAFvC,aAEuCA,QAFvC,CAEgDC,iBAFhD,aAEgDA,iBAFhD,uBAGJlB,CAAAA,IAAI,CAAC,qBAAD,CAAuB,CAACc,UAAU,CAAVA,UAAD,CAAYC,IAAI,CAAJA,IAAZ,CAAiBC,UAAU,CAAVA,UAAjB,CAAvB,CAHA,QAIVC,QAAQ,CAAChB,aAAa,CAACa,UAAD,CAAd,CAAR,CACAI,iBAAiB,GACjBf,MAAM,CAAC,CAAEgB,KAAK,CAAE,iBAAT,CAAD,CAAN,CANU,sD,qEASbC,S,CAAY,UAAM,CACd,MAAKR,KAAL,CAAWS,aAAX,GACA,MAAKX,QAAL,CAAc,CAAET,aAAa,CAAE,KAAjB,CAAd,EACH,C,sFAGO,IACCA,CAAAA,aADD,CACkB,KAAKK,KADvB,CACCL,aADD,CAGJ,mBACI,oBAAC,QAAD,mBACI,2CACG,yBAAG,IAAI,CAAC,GAAR,CAAY,OAAO,CAAE,KAAKM,UAA1B,2BAAyDL,OAAO,GAAK,UAAL,CAAkB,EAAlF,EADH,CADJ,CAKKD,aAAa,eACV,oBAAC,MAAD,EACI,KAAK,CAAC,gBADV,CAEI,OAAO,CAAC,6EAFZ,CAGI,UAAU,CAAC,QAHf,CAII,MAAM,CAAE,KAAKU,UAJjB,CAKI,IAAI,CAAE,KAAKS,SALf,EANR,CADJ,CAiBH,C,iCA3C6BvB,S,EAwDlC,cAAeE,CAAAA,OAAO,GAAGM,mBAAH,CAAtB,CACA,OAAQA,mBAAmB,GAAIiB,CAAAA,uBAA/B","sourcesContent":[" import React,{Component,Fragment} from 'react';\r\n import {connect} from 'react-redux';\r\n import {post} from 'axios';\r\n import {deleteComment} from '../../../../../actions/post';\r\n import {isAdmin} from '../../../../../utils/admin-utils';\r\n import {notify} from '../../../../../utils/utilMethods/handy-notification';\r\n import Prompt from '../../../../others/prompt';\r\n import {number,string,func,shape} from 'prop-types';\r\n\r\n class DeleteCommentOption extends Component{\r\n     state = { deleteComment: false }\r\n\r\n     showPrompt = e => {\r\n         e.preventDefault();\r\n         this.setState({ deleteComment: true })\r\n     }\r\n\r\n     delComment = async e => {\r\n        e.preventDefault()\r\n        let {commentDetails:{comment_id,type,commentSrc},dispatch,decrementComments} = this.props;\r\n        await post('/api/delete-comment',{comment_id,type,commentSrc});\r\n        dispatch(deleteComment(comment_id))\r\n        decrementComments()\r\n        notify({ value: 'Comment deleted'})\r\n     }\r\n\r\n     modalBack = () => {\r\n         this.props.toggleOptions()\r\n         this.setState({ deleteComment: false })\r\n     }\r\n\r\n\r\n     render(){\r\n         let {deleteComment} = this.state;\r\n\r\n         return (\r\n             <Fragment>\r\n                 <li>\r\n                    <a href=\"#\" onClick={this.showPrompt}>{`Delete comment ${isAdmin() ? 'as admin' : ''}`}</a>\r\n                 </li>\r\n\r\n                 {deleteComment && (\r\n                     <Prompt\r\n                         title=\"delete comment\"\r\n                         content=\"This comment will be deleted.There's no undo so you wont be able to find it\"\r\n                         actionText=\"Delete\"\r\n                         action={this.delComment}\r\n                         back={this.modalBack}\r\n                     />\r\n                 )}\r\n             </Fragment>\r\n         )\r\n     }\r\n }\r\n\r\n DeleteCommentOption.propTypes = {\r\n     commentDetails: shape({\r\n         comment_id: number.isRequired,\r\n         commentSrc: string.isRequired,\r\n         type: string.isRequired\r\n         }).isRequired,\r\n      decrementComments: func.isRequired,\r\n      toggleOptions: func.isRequired   \r\n }\r\n\r\n export default connect()(DeleteCommentOption)\r\n export {DeleteCommentOption as PureDeleteCommentOption}"]},"metadata":{},"sourceType":"module"}