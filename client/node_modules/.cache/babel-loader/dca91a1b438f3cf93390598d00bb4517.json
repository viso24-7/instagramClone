{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\JavascriptProjects3\\\\instagramClone\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\JavascriptProjects3\\\\instagramClone\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import{post}from'axios';import{notify}from'../utils/utilMethods/handy-notification';import{unblockUser}from'../actions/settings';import{ObjectMssg,wait}from'./utils';import Action from'./api/Action';/**\r\n * Block user\r\n * @param {Number} user User to block\r\n */export var blockUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(user){var _yield$post,message;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return post('/api/block',{user:user});case 2:_yield$post=_context.sent;message=_yield$post.data.message;notify({value:message});case 5:case\"end\":return _context.stop();}}},_callee);}));return function blockUser(_x){return _ref.apply(this,arguments);};}();/**\r\n *\r\n * @param {Object} options\r\n * @param {Number} options.block_id\r\n * @param {String} options.username\r\n * @param {Function} options.dispatch\r\n */export var unBlockUser=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(options){var username,block_id,dispatch,_yield$post2,_yield$post2$data,success,message;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:username=options.username,block_id=options.block_id,dispatch=options.dispatch;_context2.next=3;return post('/api/unblock-user',{block_id:block_id});case 3:_yield$post2=_context2.sent;_yield$post2$data=_yield$post2.data;success=_yield$post2$data.success;message=_yield$post2$data.message;if(success){dispatch(unblockUser(block_id));notify({value:\"Unblocked \".concat(username)});}else{notify({value:message});}case 8:case\"end\":return _context2.stop();}}},_callee2);}));return function unBlockUser(_x2){return _ref2.apply(this,arguments);};}();/**\r\n * Changes the password of session user\r\n * @param {String} old Old/Current password\r\n * @param {String} new_ New password\r\n * @param {String} new_a New password again for surety\r\n */export var changePassword=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(old,new_,new_a){var action,_yield$post3,_yield$post3$data,success,message;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:action=new Action('.c_p_btn');if(!(!old&&!new_&&!new_a)){_context3.next=5;break;}notify({value:'Some value are missing'});_context3.next=18;break;case 5:if(!(new_!==new_a)){_context3.next=9;break;}notify({value:'New password does not match'});_context3.next=18;break;case 9:action.start('Changing password ');wait();_context3.next=13;return post('/user/change-password',{old:old,new_:new_,new_a:new_a});case 13:_yield$post3=_context3.sent;_yield$post3$data=_yield$post3.data;success=_yield$post3$data.success;message=_yield$post3$data.message;if(success){notify({value:message,done:function done(){return window.location.reload();}});}else{notify({value:ObjectMssg(message)});action.end('Change password');}case 18:case\"end\":return _context3.stop();}}},_callee3);}));return function changePassword(_x3,_x4,_x5){return _ref3.apply(this,arguments);};}();/**\r\n * Change user's password\r\n * @param {String} password User's password\r\n */export var deactivateAccount=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(password,hidePrompt){var action,_yield$post4,_yield$post4$data,success,message;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:action=new Action('.prompt-done');action.start('Deactivating ...');wait();_context4.next=5;return post('/user/deactivate-acount',{password:password});case 5:_yield$post4=_context4.sent;_yield$post4$data=_yield$post4.data;success=_yield$post4$data.success;message=_yield$post4$data.message;action.end('Deactivated');notify({value:message,done:function done(){success?window.location.href='/login':hidePrompt();}});case 11:case\"end\":return _context4.stop();}}},_callee4);}));return function deactivateAccount(_x6,_x7){return _ref4.apply(this,arguments);};}();","map":{"version":3,"sources":["C:/JavascriptProjects3/instagramClone/client/src/utils/setting-utils.js"],"names":["post","notify","unblockUser","ObjectMssg","wait","Action","blockUser","user","message","data","value","unBlockUser","options","username","block_id","dispatch","success","changePassword","old","new_","new_a","action","start","done","window","location","reload","end","deactivateAccount","password","hidePrompt","href"],"mappings":"mVAAA,OAAQA,IAAR,KAAmB,OAAnB,CACA,OAAQC,MAAR,KAAqB,yCAArB,CACA,OAAQC,WAAR,KAA0B,qBAA1B,CACA,OAAQC,UAAR,CAAmBC,IAAnB,KAA+B,SAA/B,CACA,MAAOC,CAAAA,MAAP,KAAmB,cAAnB,CAEA;;;GAIE,MAAO,IAAMC,CAAAA,SAAS,0FAAG,iBAAMC,IAAN,gKACSP,CAAAA,IAAI,CAAC,YAAD,CAAe,CAACO,IAAI,CAAJA,IAAD,CAAf,CADb,kCACTC,OADS,aAChBC,IADgB,CACTD,OADS,CAErBP,MAAM,CAAC,CAAES,KAAK,CAAEF,OAAT,CAAD,CAAN,CAFqB,sDAAH,kBAATF,CAAAA,SAAS,4CAAf,CAKT;;;;;;GAOC,MAAO,IAAMK,CAAAA,WAAW,2FAAG,kBAAMC,OAAN,oMAClBC,QADkB,CACYD,OADZ,CAClBC,QADkB,CACTC,QADS,CACYF,OADZ,CACTE,QADS,CACAC,QADA,CACYH,OADZ,CACAG,QADA,wBAEef,CAAAA,IAAI,CAAC,mBAAD,CAAqB,CAACc,QAAQ,CAARA,QAAD,CAArB,CAFnB,mEAElBL,IAFkB,CAEXO,OAFW,mBAEXA,OAFW,CAEHR,OAFG,mBAEHA,OAFG,CAIvB,GAAGQ,OAAH,CAAW,CACPD,QAAQ,CAACb,WAAW,CAACY,QAAD,CAAZ,CAAR,CACAb,MAAM,CAAC,CAAES,KAAK,qBAAeG,QAAf,CAAP,CAAD,CAAN,CACH,CAHD,IAGO,CACHZ,MAAM,CAAC,CAACS,KAAK,CAAEF,OAAR,CAAD,CAAN,CACH,CATsB,wDAAH,kBAAXG,CAAAA,WAAW,8CAAjB,CAYR;;;;;GAMC,MAAO,IAAMM,CAAAA,cAAc,2FAAG,kBAAOC,GAAP,CAAWC,IAAX,CAAgBC,KAAhB,gLACtBC,MADsB,CACb,GAAIhB,CAAAA,MAAJ,CAAW,UAAX,CADa,MAGvB,CAACa,GAAD,EAAQ,CAACC,IAAT,EAAiB,CAACC,KAHK,2BAItBnB,MAAM,CAAC,CAAES,KAAK,CAAE,wBAAT,CAAD,CAAN,CAJsB,oCAKhBS,IAAI,GAAKC,KALO,2BAMtBnB,MAAM,CAAC,CAACS,KAAK,CAAE,6BAAR,CAAD,CAAN,CANsB,+BAQtBW,MAAM,CAACC,KAAP,CAAa,oBAAb,EACAlB,IAAI,GATkB,wBAWgBJ,CAAAA,IAAI,CAAC,uBAAD,CAA0B,CAACkB,GAAG,CAAHA,GAAD,CAAKC,IAAI,CAAJA,IAAL,CAAUC,KAAK,CAALA,KAAV,CAA1B,CAXpB,oEAWjBX,IAXiB,CAWVO,OAXU,mBAWVA,OAXU,CAWFR,OAXE,mBAWFA,OAXE,CAYtB,GAAGQ,OAAH,CAAW,CACPf,MAAM,CAAC,CACHS,KAAK,CAAEF,OADJ,CAEHe,IAAI,CAAE,sBAAMC,CAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB,EAAN,EAFH,CAAD,CAAN,CAIH,CALD,IAKM,CACFzB,MAAM,CAAC,CAAES,KAAK,CAAEP,UAAU,CAACK,OAAD,CAAnB,CAAD,CAAN,CACAa,MAAM,CAACM,GAAP,CAAW,iBAAX,EACH,CApBqB,yDAAH,kBAAdV,CAAAA,cAAc,sDAApB,CAwBR;;;GAIC,MAAO,IAAMW,CAAAA,iBAAiB,2FAAG,kBAAOC,QAAP,CAAgBC,UAAhB,gLACzBT,MADyB,CAChB,GAAIhB,CAAAA,MAAJ,CAAW,cAAX,CADgB,CAG7BgB,MAAM,CAACC,KAAP,CAAa,kBAAb,EACAlB,IAAI,GAJyB,uBAKSJ,CAAAA,IAAI,CAAC,yBAAD,CAA4B,CAAC6B,QAAQ,CAARA,QAAD,CAA5B,CALb,mEAKxBpB,IALwB,CAKjBO,OALiB,mBAKjBA,OALiB,CAKTR,OALS,mBAKTA,OALS,CAM7Ba,MAAM,CAACM,GAAP,CAAW,aAAX,EAEA1B,MAAM,CAAC,CACHS,KAAK,CAAEF,OADJ,CAEHe,IAAI,CAAE,eAAM,CAACP,OAAO,CAAIQ,MAAM,CAACC,QAAP,CAAgBM,IAAhB,CAAuB,QAA3B,CAAuCD,UAAU,EAAxD,CAA2D,CAFrE,CAAD,CAAN,CAR6B,yDAAH,kBAAjBF,CAAAA,iBAAiB,kDAAvB","sourcesContent":["import {post} from 'axios';\r\nimport {notify} from '../utils/utilMethods/handy-notification';\r\nimport {unblockUser} from '../actions/settings';\r\nimport {ObjectMssg,wait} from  './utils';\r\nimport Action from './api/Action';\r\n\r\n/**\r\n * Block user\r\n * @param {Number} user User to block\r\n */\r\n  export const blockUser = async user => {\r\n      let {data: {message}} = await post('/api/block', {user});\r\n      notify({ value: message})\r\n  }\r\n\r\n/**\r\n *\r\n * @param {Object} options\r\n * @param {Number} options.block_id\r\n * @param {String} options.username\r\n * @param {Function} options.dispatch\r\n */\r\n export const unBlockUser = async options => {\r\n     let {username,block_id,dispatch} = options;\r\n     let {data: {success,message}} = await post('/api/unblock-user',{block_id});\r\n\r\n     if(success){\r\n         dispatch(unblockUser(block_id));\r\n         notify({ value: `Unblocked ${username}`})\r\n     } else {\r\n         notify({value: message})\r\n     }\r\n  } \r\n\r\n/**\r\n * Changes the password of session user\r\n * @param {String} old Old/Current password\r\n * @param {String} new_ New password\r\n * @param {String} new_a New password again for surety\r\n */\r\n export const changePassword = async (old,new_,new_a) => {\r\n     let action = new Action('.c_p_btn');\r\n\r\n     if(!old && !new_ && !new_a){\r\n         notify({ value: 'Some value are missing'})\r\n     } else if(new_ !== new_a){\r\n         notify({value: 'New password does not match'})\r\n     } else {\r\n         action.start('Changing password ');\r\n         wait();\r\n\r\n         let {data: {success,message}} = await post('/user/change-password' ,{old,new_,new_a});\r\n         if(success){\r\n             notify({\r\n                 value: message,\r\n                 done: () => window.location.reload()\r\n             })\r\n         } else{\r\n             notify({ value: ObjectMssg(message)});\r\n             action.end('Change password')\r\n         }\r\n     }\r\n }\r\n\r\n/**\r\n * Change user's password\r\n * @param {String} password User's password\r\n */\r\n export const deactivateAccount = async (password,hidePrompt) => {\r\n     let action = new Action('.prompt-done');\r\n\r\n     action.start('Deactivating ...');\r\n     wait();\r\n     let {data: {success,message}} = await post('/user/deactivate-acount', {password});\r\n     action.end('Deactivated');\r\n\r\n     notify({\r\n         value: message,\r\n         done: () => {success ? (window.location.href = '/login') : hidePrompt()}\r\n     });\r\n }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}