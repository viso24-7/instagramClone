{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\JavascriptProjects3\\\\instagramClone\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\JavascriptProjects3\\\\instagramClone\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:\\\\JavascriptProjects3\\\\instagramClone\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\JavascriptProjects3\\\\instagramClone\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\JavascriptProjects3\\\\instagramClone\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\JavascriptProjects3\\\\instagramClone\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component,Fragment}from'react';import{connect}from'react-redux';import{Redirect}from'react-router';import{post}from'axios';import{notify}from'../../../../utils/utilMethods/handy-notification';import{Me}from'../../../../utils/utils';import{isAdmin}from'../../../../utils/admin-utils';import Prompt from'../../../others/prompt';var DeleteGroup=/*#__PURE__*/function(_Component){_inherits(DeleteGroup,_Component);var _super=_createSuper(DeleteGroup);function DeleteGroup(){var _this;_classCallCheck(this,DeleteGroup);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={deleteGroup:false,deleted:false};_this.showDeleteGroup=function(e){e.preventDefault();_this.setState({deleteGroup:!_this.state.deleteGroup});};_this.delete=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var group_id;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();group_id=_this.props.group_details.group_id;_context.next=4;return post('/api/delete-group',{group:group_id});case 4:notify({value:'Group deleted',done:function done(){return _this.setState({deleted:true});}});case 5:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.modalBack=function(){_this.setState({deleteGroup:false});_this.props.toggleoptions();};return _this;}_createClass(DeleteGroup,[{key:\"render\",value:function render(){var admin=this.props.group_details.admin;var _this$state=this.state,deleteGroup=_this$state.deleteGroup,deleted=_this$state.deleted;return/*#__PURE__*/React.createElement(Fragment,null,deleted&&/*#__PURE__*/React.createElement(Redirect,{to:\"/\"}),(Me(admin)||isAdmin())&&/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"a\",{href:\"#\",className:\"p_copy_link\",onClick:this.showDeleteGroup},\"Delete group \",isAdmin()&&'as admin')),deleteGroup&&/*#__PURE__*/React.createElement(Prompt,{title:\"Delete group\",content:\"This group will be deleted.There's no undo so you wont be able to find it.\",actionText:\"Delete\",action:this.delete,back:this.modalBack}));}}]);return DeleteGroup;}(Component);var mapStateToProps=function mapStateToProps(state){return{group_details:state.Group.group_details};};export default connect(mapStateToProps)(DeleteGroup);export{DeleteGroup as PureDeleteGroup};","map":{"version":3,"sources":["C:/JavascriptProjects3/instagramClone/client/src/components/group/group-banner/top-options/deleteGroup.js"],"names":["React","Component","Fragment","connect","Redirect","post","notify","Me","isAdmin","Prompt","DeleteGroup","state","deleteGroup","deleted","showDeleteGroup","e","preventDefault","setState","delete","group_id","props","group_details","group","value","done","modalBack","toggleoptions","admin","mapStateToProps","Group","PureDeleteGroup"],"mappings":"++BAAC,MAAOA,CAAAA,KAAP,EAAcC,SAAd,CAAwBC,QAAxB,KAAuC,OAAvC,CACA,OAAQC,OAAR,KAAsB,aAAtB,CACA,OAAQC,QAAR,KAAuB,cAAvB,CACA,OAAQC,IAAR,KAAmB,OAAnB,CACA,OAAQC,MAAR,KAAqB,kDAArB,CACA,OAAQC,EAAR,KAAiB,yBAAjB,CACA,OAAQC,OAAR,KAAsB,+BAAtB,CACA,MAAOC,CAAAA,MAAP,KAAmB,wBAAnB,C,GAGMC,CAAAA,W,+UACFC,K,CAAQ,CACJC,WAAW,CAAE,KADT,CAEJC,OAAO,CAAE,KAFL,C,OAKRC,e,CAAkB,SAAAC,CAAC,CAAI,CACnBA,CAAC,CAACC,cAAF,GACA,MAAKC,QAAL,CAAc,CAAEL,WAAW,CAAE,CAAC,MAAKD,KAAL,CAAWC,WAA3B,CAAd,EACH,C,OAEDM,M,0FAAS,iBAAMH,CAAN,+HACLA,CAAC,CAACC,cAAF,GACKG,QAFA,CAEY,MAAKC,KAAL,CAAWC,aAFvB,CAEAF,QAFA,uBAGCd,CAAAA,IAAI,CAAC,mBAAD,CAAqB,CAACiB,KAAK,CAAEH,QAAR,CAArB,CAHL,QAILb,MAAM,CAAC,CACHiB,KAAK,CAAE,eADJ,CAEHC,IAAI,CAAE,sBAAM,OAAKP,QAAL,CAAc,CAAEJ,OAAO,CAAE,IAAX,CAAd,CAAN,EAFH,CAAD,CAAN,CAJK,sD,qEAURY,S,CAAY,UAAM,CACZ,MAAKR,QAAL,CAAc,CAAEL,WAAW,CAAE,KAAf,CAAd,EACA,MAAKQ,KAAL,CAAWM,aAAX,GACL,C,8EAEM,IACgBC,CAAAA,KADhB,CAC0B,KAAKP,KAD/B,CACAC,aADA,CACgBM,KADhB,iBAEuB,KAAKhB,KAF5B,CAEAC,WAFA,aAEAA,WAFA,CAEYC,OAFZ,aAEYA,OAFZ,CAIL,mBACI,oBAAC,QAAD,MACKA,OAAO,eAAI,oBAAC,QAAD,EAAU,EAAE,CAAC,GAAb,EADhB,CAGK,CAACN,EAAE,CAACoB,KAAD,CAAF,EAAanB,OAAO,EAArB,gBACG,2CACI,yBAAG,IAAI,CAAC,GAAR,CAAY,SAAS,CAAC,aAAtB,CAAoC,OAAO,CAAE,KAAKM,eAAlD,kBACkBN,OAAO,IAAM,UAD/B,CADJ,CAJR,CAWKI,WAAW,eACR,oBAAC,MAAD,EACG,KAAK,CAAC,cADT,CAEG,OAAO,CAAC,4EAFX,CAGG,UAAU,CAAC,QAHd,CAIG,MAAM,CAAE,KAAKM,MAJhB,CAKG,IAAI,CAAE,KAAKO,SALd,EAZR,CADJ,CAuBF,C,yBArDqBxB,S,EA4D1B,GAAM2B,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAAAjB,KAAK,QAAK,CAC9BU,aAAa,CAAEV,KAAK,CAACkB,KAAN,CAAYR,aADG,CAAL,EAA7B,CAIA,cAAelB,CAAAA,OAAO,CAACyB,eAAD,CAAP,CAAyBlB,WAAzB,CAAf,CACA,OAAQA,WAAW,GAAIoB,CAAAA,eAAvB","sourcesContent":[" import React,{Component,Fragment} from 'react';\r\n import {connect} from 'react-redux';\r\n import {Redirect} from 'react-router';\r\n import {post} from 'axios';\r\n import {notify} from '../../../../utils/utilMethods/handy-notification';\r\n import {Me} from '../../../../utils/utils';\r\n import {isAdmin} from '../../../../utils/admin-utils';\r\n import Prompt from '../../../others/prompt';\r\n import {func} from 'prop-types';\r\n\r\n class DeleteGroup extends Component{\r\n     state = {\r\n         deleteGroup: false,\r\n         deleted: false\r\n     }\r\n\r\n     showDeleteGroup = e => {\r\n         e.preventDefault();\r\n         this.setState({ deleteGroup: !this.state.deleteGroup})\r\n     }\r\n\r\n     delete = async e => {\r\n         e.preventDefault();\r\n         let {group_id} = this.props.group_details;\r\n         await post('/api/delete-group',{group: group_id});\r\n         notify({\r\n             value: 'Group deleted',\r\n             done: () => this.setState({ deleted: true})\r\n         })\r\n     }\r\n\r\n      modalBack = () => {\r\n            this.setState({ deleteGroup: false})\r\n            this.props.toggleoptions()\r\n      }\r\n      \r\n     render(){\r\n        let {group_details: {admin}} = this.props;\r\n        let {deleteGroup,deleted} = this.state;\r\n\r\n        return (\r\n            <Fragment>\r\n                {deleted && <Redirect to=\"/\" />}\r\n\r\n                {(Me(admin) || isAdmin()) && (\r\n                    <li>\r\n                        <a href=\"#\" className=\"p_copy_link\" onClick={this.showDeleteGroup}>\r\n                            Delete group {isAdmin() && 'as admin'}\r\n                        </a>\r\n                    </li>\r\n                )}\r\n\r\n                {deleteGroup && (\r\n                    <Prompt\r\n                       title=\"Delete group\"\r\n                       content=\"This group will be deleted.There's no undo so you wont be able to find it.\"\r\n                       actionText=\"Delete\"\r\n                       action={this.delete}\r\n                       back={this.modalBack}\r\n                    />\r\n                )}\r\n            </Fragment>\r\n        )\r\n     }\r\n }\r\n\r\n DeleteGroup.propTypes = {\r\n     toggleoptions: func.isRequired\r\n }\r\n\r\n const mapStateToProps = state => ({\r\n     group_details: state.Group.group_details\r\n })\r\n\r\n export default connect(mapStateToProps)(DeleteGroup);\r\n export {DeleteGroup as PureDeleteGroup}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}