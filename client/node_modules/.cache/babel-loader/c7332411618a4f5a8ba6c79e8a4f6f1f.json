{"ast":null,"code":"import _classCallCheck from\"C:\\\\JavascriptProjects3\\\\instagramClone\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\JavascriptProjects3\\\\instagramClone\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\JavascriptProjects3\\\\instagramClone\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\JavascriptProjects3\\\\instagramClone\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component,Fragment}from'react';import{connect}from'react-redux';import{Redirect}from'react-router';import{Me}from'../../../../../utils/utils';import{isAdmin}from'../../../../../utils/admin-utils';import{deletePost}from'../../../../../utils/post-utils';import Prompt from'../../../../others/prompt';var DeletePostOption=/*#__PURE__*/function(_Component){_inherits(DeletePostOption,_Component);var _super=_createSuper(DeletePostOption);function DeletePostOption(){var _this;_classCallCheck(this,DeletePostOption);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={deletePost:false,redirect:false};_this.showDeletePost=function(e){e.preventDefault();_this.setState({deletePost:true});};_this.delete=function(e){e.preventDefault();var _this$props=_this.props,_this$props$postDetai=_this$props.postDetails,post_id=_this$props$postDetai.post_id,when=_this$props$postDetai.when,dispatch=_this$props.dispatch;deletePost({post_id:post_id,when:when,dispatch:dispatch,redirect:function redirect(){return _this.setState({redirect:true});}});};_this.modalBack=function(){_this.props.toggleOptions();_this.setState({deletePost:false});};return _this;}_createClass(DeletePostOption,[{key:\"render\",value:function render(){var _this$state=this.state,deletePost=_this$state.deletePost,redirect=_this$state.redirect;var user=this.props.postDetails.user;return/*#__PURE__*/React.createElement(Fragment,null,redirect&&/*#__PURE__*/React.createElement(Redirect,{to:\"/\"}),(Me(user)||isAdmin())&&/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"a\",{href:\"#\",className:\"delete_post\",onClick:this.showDeletePost},\"Delete post \",isAdmin()?'as admin':'')),deletePost&&/*#__PURE__*/React.createElement(Prompt,{title:\"Delete post\",content:\"This post will be deleted.There's no undo so you won't be able to find it.\",actionText:\"Delete\",action:this.delete,back:this.modalBack}));}}]);return DeletePostOption;}(Component);export default connect()(DeletePostOption);export{DeletePostOption as PureDeletePostOption};","map":{"version":3,"sources":["C:/JavascriptProjects3/instagramClone/client/src/components/post/post/post-top/options/deletePost.js"],"names":["React","Component","Fragment","connect","Redirect","Me","isAdmin","deletePost","Prompt","DeletePostOption","state","redirect","showDeletePost","e","preventDefault","setState","delete","props","postDetails","post_id","when","dispatch","modalBack","toggleOptions","user","PureDeletePostOption"],"mappings":"4pBAAC,MAAOA,CAAAA,KAAP,EAAcC,SAAd,CAAwBC,QAAxB,KAAuC,OAAvC,CACA,OAAQC,OAAR,KAAsB,aAAtB,CACA,OAAQC,QAAR,KAAuB,cAAvB,CACA,OAAQC,EAAR,KAAiB,4BAAjB,CACA,OAAQC,OAAR,KAAsB,kCAAtB,CACA,OAAQC,UAAR,KAAyB,iCAAzB,CACA,MAAOC,CAAAA,MAAP,KAAmB,2BAAnB,C,GAGMC,CAAAA,gB,mWACFC,K,CAAQ,CACJH,UAAU,CAAE,KADR,CAEJI,QAAQ,CAAE,KAFN,C,OAKRC,c,CAAiB,SAAAC,CAAC,CAAI,CAClBA,CAAC,CAACC,cAAF,GACA,MAAKC,QAAL,CAAc,CAAER,UAAU,CAAE,IAAd,CAAd,EACH,C,OAEDS,M,CAAU,SAAAH,CAAC,CAAI,CACXA,CAAC,CAACC,cAAF,GADW,gBAEiC,MAAKG,KAFtC,mCAENC,WAFM,CAEOC,OAFP,uBAEOA,OAFP,CAEeC,IAFf,uBAEeA,IAFf,CAEqBC,QAFrB,aAEqBA,QAFrB,CAGXd,UAAU,CAAC,CACPY,OAAO,CAAPA,OADO,CAEPC,IAAI,CAAJA,IAFO,CAGPC,QAAQ,CAARA,QAHO,CAIPV,QAAQ,CAAE,0BAAM,OAAKI,QAAL,CAAc,CAAEJ,QAAQ,CAAE,IAAZ,CAAd,CAAN,EAJH,CAAD,CAAV,CAMH,C,OAEDW,S,CAAY,UAAM,CACd,MAAKL,KAAL,CAAWM,aAAX,GACA,MAAKR,QAAL,CAAc,CAAER,UAAU,CAAE,KAAd,CAAd,EACH,C,mFAEO,iBACwB,KAAKG,KAD7B,CACCH,UADD,aACCA,UADD,CACYI,QADZ,aACYA,QADZ,IAECa,CAAAA,IAFD,CAES,KAAKP,KAAL,CAAWC,WAFpB,CAECM,IAFD,CAIJ,mBACI,oBAAC,QAAD,MACKb,QAAQ,eAAI,oBAAC,QAAD,EAAU,EAAE,CAAC,GAAb,EADjB,CAGK,CAACN,EAAE,CAACmB,IAAD,CAAF,EAAYlB,OAAO,EAApB,gBACG,2CACI,yBAAG,IAAI,CAAC,GAAR,CAAY,SAAS,CAAC,aAAtB,CAAoC,OAAO,CAAE,KAAKM,cAAlD,iBACiBN,OAAO,GAAK,UAAL,CAAkB,EAD1C,CADJ,CAJR,CAWKC,UAAU,eACP,oBAAC,MAAD,EACG,KAAK,CAAC,aADT,CAEG,OAAO,CAAC,4EAFX,CAGG,UAAU,CAAC,QAHd,CAIG,MAAM,CAAE,KAAKS,MAJhB,CAKG,IAAI,CAAE,KAAKM,SALd,EAZR,CADJ,CAuBH,C,8BAtD0BrB,S,EAkE/B,cAAeE,CAAAA,OAAO,GAAGM,gBAAH,CAAtB,CACA,OAAQA,gBAAgB,GAAIgB,CAAAA,oBAA5B","sourcesContent":[" import React,{Component,Fragment} from 'react';\r\n import {connect} from 'react-redux';\r\n import {Redirect} from 'react-router'\r\n import {Me} from '../../../../../utils/utils';\r\n import {isAdmin} from '../../../../../utils/admin-utils';\r\n import {deletePost} from '../../../../../utils/post-utils'\r\n import Prompt from '../../../../others/prompt';\r\n import {number,string,func,shape} from 'prop-types' \r\n\r\n class DeletePostOption extends Component{\r\n     state = {\r\n         deletePost: false,\r\n         redirect: false\r\n     }\r\n\r\n     showDeletePost = e => {\r\n         e.preventDefault();\r\n         this.setState({ deletePost: true})\r\n     }\r\n\r\n     delete =  e => {\r\n         e.preventDefault();\r\n         let {postDetails:{post_id,when},dispatch} = this.props;\r\n         deletePost({\r\n             post_id,\r\n             when,\r\n             dispatch,\r\n             redirect: () => this.setState({ redirect: true })\r\n         })\r\n     }\r\n\r\n     modalBack = () => {\r\n         this.props.toggleOptions();\r\n         this.setState({ deletePost: false})\r\n     }\r\n\r\n     render(){\r\n         let {deletePost,redirect} = this.state;\r\n         let {user} = this.props.postDetails\r\n\r\n         return (\r\n             <Fragment>\r\n                 {redirect && <Redirect to=\"/\" />}\r\n\r\n                 {(Me(user) || isAdmin()) && (\r\n                     <li>\r\n                         <a href=\"#\" className=\"delete_post\" onClick={this.showDeletePost}>\r\n                             Delete post {isAdmin() ? 'as admin' : ''}\r\n                         </a>\r\n                     </li>\r\n                 )}\r\n\r\n                 {deletePost && (\r\n                     <Prompt\r\n                        title=\"Delete post\"\r\n                        content=\"This post will be deleted.There's no undo so you won't be able to find it.\"\r\n                        actionText=\"Delete\"\r\n                        action={this.delete}\r\n                        back={this.modalBack}\r\n                     />\r\n                 )}\r\n             </Fragment>\r\n         )\r\n     }\r\n }\r\n\r\n DeletePostOption.propTypes = {\r\n     postDetails: shape({\r\n         user: number.isRequired,\r\n         post_id: number.isRequired,\r\n         when: string.isRequired\r\n        }).isRequired,\r\n     toggleOptions: func.isRequired   \r\n }\r\n\r\n export default connect()(DeletePostOption)\r\n export {DeletePostOption as PureDeletePostOption}"]},"metadata":{},"sourceType":"module"}