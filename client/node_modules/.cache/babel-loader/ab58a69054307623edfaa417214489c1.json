{"ast":null,"code":"import _classCallCheck from\"C:\\\\JavascriptProjects3\\\\instagramClone\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\JavascriptProjects3\\\\instagramClone\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\JavascriptProjects3\\\\instagramClone\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\JavascriptProjects3\\\\instagramClone\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component,Fragment}from'react';import{upload_avatar}from'../../../utils/avatar-utils';import PreviewAvatar from'./preview-avatar';import FileInput from'../input/file';var UploadAvatar=/*#__PURE__*/function(_Component){_inherits(UploadAvatar,_Component);var _super=_createSuper(UploadAvatar);function UploadAvatar(){var _this;_classCallCheck(this,UploadAvatar);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={fileAvatarChanged:false,fileInput:'',previewAvatar:'/images/spacecraft.jpg',targetFile:''};_this.preViewAvatar=function(e){_this.setState({fileAvatarChanged:true});_this.setState({fileInput:e.target.value});var reader=new FileReader();var file=e.target.files[0];_this.setState({targetFile:file});reader.onload=function(e){return _this.setState({previewAvatar:e.target.result});};reader.readAsDataURL(file);};_this.preViewAvatarBack=function(e){e.preventDefault();_this.setState({fileAvatarChanged:false,fileInput:''});};_this.uploadAvatar=function(e){e.preventDefault();var targetFile=_this.state.targetFile;var _this$props=_this.props,of=_this$props.of,group=_this$props.group;upload_avatar({file:targetFile,of:of,group:group});};return _this;}_createClass(UploadAvatar,[{key:\"render\",value:function render(){var _this$state=this.state,fileInput=_this$state.fileInput,fileAvatarChanged=_this$state.fileAvatarChanged,previewAvatar=_this$state.previewAvatar;return/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(\"form\",{method:\"post\",className:\"post\",encType:\"multipart/form-data\"},/*#__PURE__*/React.createElement(FileInput,{value:fileInput,fileChange:this.preViewAvatar,label:\"Upload avatar\",labelClass:\"sec_btn\"})),fileAvatarChanged?/*#__PURE__*/React.createElement(PreviewAvatar,{previewAvatar:previewAvatar,back:this.preViewAvatarBack,upload:this.uploadAvatar}):null);}}]);return UploadAvatar;}(Component);export{UploadAvatar as default};","map":{"version":3,"sources":["C:/JavascriptProjects3/instagramClone/client/src/components/others/avatar/upload-avatar.js"],"names":["React","Component","Fragment","upload_avatar","PreviewAvatar","FileInput","UploadAvatar","state","fileAvatarChanged","fileInput","previewAvatar","targetFile","preViewAvatar","e","setState","target","value","reader","FileReader","file","files","onload","result","readAsDataURL","preViewAvatarBack","preventDefault","uploadAvatar","props","of","group"],"mappings":"4pBAAC,MAAOA,CAAAA,KAAP,EAAcC,SAAd,CAAwBC,QAAxB,KAAuC,OAAvC,CACA,OAAQC,aAAR,KAA4B,6BAA5B,CACA,MAAOC,CAAAA,aAAP,KAA0B,kBAA1B,CACA,MAAOC,CAAAA,SAAP,KAAsB,eAAtB,C,GAGqBC,CAAAA,Y,mVACjBC,K,CAAQ,CACHC,iBAAiB,CAAE,KADhB,CAEHC,SAAS,CAAE,EAFR,CAGHC,aAAa,CAAE,wBAHZ,CAIHC,UAAU,CAAE,EAJT,C,OAONC,a,CAAgB,SAAAC,CAAC,CAAI,CACjB,MAAKC,QAAL,CAAc,CAAEN,iBAAiB,CAAE,IAArB,CAAd,EACA,MAAKM,QAAL,CAAc,CAAEL,SAAS,CAAEI,CAAC,CAACE,MAAF,CAASC,KAAtB,CAAd,EACA,GAAIC,CAAAA,MAAM,CAAG,GAAIC,CAAAA,UAAJ,EAAb,CACA,GAAIC,CAAAA,IAAI,CAAGN,CAAC,CAACE,MAAF,CAASK,KAAT,CAAe,CAAf,CAAX,CACA,MAAKN,QAAL,CAAc,CAAEH,UAAU,CAAEQ,IAAd,CAAd,EACAF,MAAM,CAACI,MAAP,CAAgB,SAAAR,CAAC,QAAI,OAAKC,QAAL,CAAc,CAAEJ,aAAa,CAAEG,CAAC,CAACE,MAAF,CAASO,MAA1B,CAAd,CAAJ,EAAjB,CACAL,MAAM,CAACM,aAAP,CAAqBJ,IAArB,EACH,C,OAEDK,iB,CAAoB,SAAAX,CAAC,CAAI,CACvBA,CAAC,CAACY,cAAF,GACA,MAAKX,QAAL,CAAc,CACVN,iBAAiB,CAAE,KADT,CAEVC,SAAS,CAAE,EAFD,CAAd,EAID,C,OAEDiB,Y,CAAe,SAAAb,CAAC,CAAI,CAChBA,CAAC,CAACY,cAAF,GADgB,GAEXd,CAAAA,UAFW,CAEG,MAAKJ,KAFR,CAEXI,UAFW,iBAGC,MAAKgB,KAHN,CAGXC,EAHW,aAGXA,EAHW,CAGRC,KAHQ,aAGRA,KAHQ,CAIhB1B,aAAa,CAAC,CACVgB,IAAI,CAAER,UADI,CAEViB,EAAE,CAAFA,EAFU,CAGVC,KAAK,CAALA,KAHU,CAAD,CAAb,CAKH,C,+EAEO,iBAC8C,KAAKtB,KADnD,CACCE,SADD,aACCA,SADD,CACWD,iBADX,aACWA,iBADX,CAC6BE,aAD7B,aAC6BA,aAD7B,CAGJ,mBACI,oBAAC,QAAD,mBACI,4BAAM,MAAM,CAAC,MAAb,CAAoB,SAAS,CAAC,MAA9B,CAAqC,OAAO,CAAC,qBAA7C,eACG,oBAAC,SAAD,EACG,KAAK,CAAED,SADV,CAEG,UAAU,CAAE,KAAKG,aAFpB,CAGG,KAAK,CAAC,eAHT,CAIG,UAAU,CAAC,SAJd,EADH,CADJ,CAUKJ,iBAAiB,cACd,oBAAC,aAAD,EACE,aAAa,CAAEE,aADjB,CAEE,IAAI,CAAE,KAAKc,iBAFb,CAGE,MAAM,CAAE,KAAKE,YAHf,EADc,CAMd,IAhBR,CADJ,CAoBH,C,0BA5DmCzB,S,SAArBK,Y","sourcesContent":[" import React,{Component,Fragment} from 'react';\r\n import {upload_avatar} from '../../../utils/avatar-utils';\r\n import PreviewAvatar from './preview-avatar';\r\n import FileInput from '../input/file';\r\n import {number,oneOf} from 'prop-types';\r\n\r\n export default class UploadAvatar extends Component{\r\n     state = {\r\n          fileAvatarChanged: false,\r\n          fileInput: '',\r\n          previewAvatar: '/images/spacecraft.jpg',\r\n          targetFile: ''\r\n       }\r\n\r\n       preViewAvatar = e => {\r\n           this.setState({ fileAvatarChanged: true })\r\n           this.setState({ fileInput: e.target.value })\r\n           let reader = new FileReader();\r\n           let file = e.target.files[0];\r\n           this.setState({ targetFile: file })\r\n           reader.onload = e => this.setState({ previewAvatar: e.target.result })\r\n           reader.readAsDataURL(file)\r\n       }\r\n\r\n       preViewAvatarBack = e => {\r\n         e.preventDefault();\r\n         this.setState({\r\n             fileAvatarChanged: false,\r\n             fileInput: ''\r\n         })\r\n       }\r\n\r\n       uploadAvatar = e => {\r\n           e.preventDefault();\r\n           let {targetFile} = this.state;\r\n           let {of,group} = this.props;\r\n           upload_avatar({\r\n               file: targetFile,\r\n               of,\r\n               group\r\n           })\r\n       }\r\n\r\n       render(){\r\n           let {fileInput,fileAvatarChanged,previewAvatar} = this.state;\r\n\r\n           return (\r\n               <Fragment>\r\n                   <form method=\"post\" className=\"post\" encType=\"multipart/form-data\">\r\n                      <FileInput\r\n                         value={fileInput}\r\n                         fileChange={this.preViewAvatar}\r\n                         label=\"Upload avatar\"\r\n                         labelClass=\"sec_btn\"\r\n                      />\r\n                   </form>\r\n\r\n                   {fileAvatarChanged ? (\r\n                       <PreviewAvatar\r\n                         previewAvatar={previewAvatar}\r\n                         back={this.preViewAvatarBack}\r\n                         upload={this.uploadAvatar}\r\n                       />\r\n                   ) : null }\r\n               </Fragment>\r\n           )\r\n       }\r\n }\r\n\r\n UploadAvatar.propTypes = {\r\n     of: oneOf(['user','group']).isRequired,\r\n     group: number\r\n }"]},"metadata":{},"sourceType":"module"}