{"ast":null,"code":"import _objectSpread from\"C:\\\\JavascriptProjects3\\\\instagramClone\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"C:\\\\JavascriptProjects3\\\\instagramClone\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\JavascriptProjects3\\\\instagramClone\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import axios,{post}from'axios';import{notify}from'../utils/utilMethods/handy-notification';import{getUserDetails,getMutualUsers}from'../actions/user';import{isFollowing,getUserStats}from'../actions/follow';import{getUserPosts,getGroupPosts}from'../actions/post';import{getGroupDetails,joinedGroup}from'../actions/group';import Compress from'image-compressor.js';import d from'./api/Dom';/**\r\n *  Shortens what with string length\r\n * @param {String} what\r\n * @param {Number} length\r\n */export var shortener=function shortener(what,length){var parse=parseInt(length),len=what.length;if(!parse){return;}return len>=parse?\"\".concat(what.substr(0,length-2),\" ..\"):len<parse?what:null;};/**\r\n * Returns data stored in dataset,(The data() method allows us to attach data of any type \r\n * to DOM elements in a way that is safe from circular)\r\n *  references and therefore from memory leaks.\r\n * @param {String} what Which data\r\n */export var uData=function uData(what){return new d('.data').data(what);};/**\r\n * Returns unique string, useful for key\r\n * the random number we convert to hexdecimal value and with \r\n * slice() start from element in position(i=3,4,5....)\r\n */export var uniq=function uniq(){return Math.random().toString(16).slice(2);};export var randNum=function randNum(){return Math.random()*200;};/**\r\n * Returns human-readable text\r\n *\r\n * @param {Number} value\r\n * @param {String} text\r\n */export var humanReadable=function humanReadable(value,text){var hr=value===0?\"No \".concat(text,\"s\"):value===1?\"1 \".concat(text):\"\".concat(value,\" \").concat(text,\"s\");return hr;};/**\r\n * Toggles the element\r\n * @param {HTMLElement} el element to toggle\r\n */export var toggle=function toggle(el){var style=el.style.display;style==='none'?style='block':style='none';};/**\r\n * Capitalizes str\r\n * @param {String} str\r\n */export var capitalizes_first=function capitalizes_first(str){return str.charAt(0).toUpperCase()+str.substr(1);};/**\r\n * Removes hr of last element of modal\r\n */export var removeHr=function removeHr(){var elements=Array.from(new d('.modal_items').toAll());var element=elements[elements.length-1];return element?Array.from(element.children).map(function(child){return child.nodeName==='hr'?child.remove():null;}):null;};/**\r\n * Toggle show password\r\n */export var viewPassword=function viewPassword(_ref){var input=_ref.input,icon=_ref.icon;var _input=new d(input);var _icon=new d(icon);if(_input.getAttr('type')==='password'){_input.setAttr('type','text');_input.html('<i class=\"fas fa-unlock-alt\"></i>');_input.css('color','#e91e63');}else{_input.setAttr('type','password');_icon.html('<i class=\"fas fa-lock\"></i>');_icon.css('color','darkturquoise');}_input.focus();};/**\r\n * For replacing illegal characters\r\n */export var replacer=function replacer(el,filter){var elem=new d(el);var regex=filter==='normal'?/[^a-z0-9_.@$#]/i:filter='bio'?/[<>]/i:null;elem.on('keyup',function(e){var value=e.currentTarget.value;elem.setValue(value.replace(regex,''));});};/**\r\n * Returns whether it's me\r\n */export var Me=function Me(user){return user===uData('session')?true:false;};/**\r\n * Returns whether email is verified\r\n */export var email_verified=function email_verified(){var ev=uData('emailVerified');return ev==='yes'?true:false;};/**\r\n * Returns whether user is private\r\n */export var isPrivate=function isPrivate(user,isFollowing,accountType){var uprivate=!Me(user)&&!isFollowing&&accountType==='private'?true:false;return uprivate;};/**\r\n * Compresses and returns file\r\n * @param {File} file\r\n */export var imageCompressor=function imageCompressor(file){return new Promise(function(resolve){new Compress(file,{quality:0.6,success:function success(file){return resolve(file);},error:function error(err){return console.log(err.message);}});});};/**\r\n * For profile\r\n */export var forProfile=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(options){var username,dispatch,invalidUser,_yield$post,valid,s_username;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:username=options.username;dispatch=options.dispatch;invalidUser=options.invalidUser;_context.next=5;return post('/api/is-user-valid',{username:username});case 5:_yield$post=_context.sent;valid=_yield$post.data;s_username=uData('username');if(!valid){invalidUser();}else{if(username!==s_username){dispatch(isFollowing(username));dispatch(getMutualUsers(username));post('/api/view-profile',{username:username});}dispatch(getUserDetails(username));dispatch(getUserStats(username));dispatch(getUserPosts(username));}case 9:case\"end\":return _context.stop();}}},_callee);}));return function forProfile(_x){return _ref2.apply(this,arguments);};}();/**\r\n * For group\r\n */export var forGroup=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(options){var group_id,dispatch,invalidGroup,_yield$post2,valid;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:group_id=options.group_id;dispatch=options.dispatch;invalidGroup=options.invalidGroup;_context2.next=5;return post('/api/is-group-valid',{group_id:group_id});case 5:_yield$post2=_context2.sent;valid=_yield$post2.data;if(!valid){invalidGroup();}else{dispatch(joinedGroup(group_id));dispatch(getGroupDetails(group_id));dispatch(getGroupPosts(group_id));}case 8:case\"end\":return _context2.stop();}}},_callee2);}));return function forGroup(_x2){return _ref3.apply(this,arguments);};}();/**\r\n * Scrolls down to 380\r\n */export var bottomScroll=function bottomScroll(){return new d('html','body').toDom().scrollTop=380;};/**\r\n * Notifies user [on the notification page]\r\n * @param {Object} options\r\n * @param {Number} options.to\r\n * @param {String} options.type\r\n * @param {Number} options.post_id\r\n * @param {Number} options.group_id\r\n * @param {Number} options.user\r\n */export var insta_notify=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(options){var defaults,obj,to,type,post_id,group_id,user;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:defaults={to:null,type:'',post_id:0,group_id:0,user:0};obj=_objectSpread(_objectSpread({},defaults),options);to=obj.to,type=obj.type,post_id=obj.post_id,group_id=obj.group_id,user=obj.user;_context3.next=5;return post('/api/notify',{to:to,type:type,post_id:post_id,group_id:group_id,user:user});case 5:case\"end\":return _context3.stop();}}},_callee3);}));return function insta_notify(_x3){return _ref4.apply(this,arguments);};}();/**\r\n * Dispatcher helper for dispatching data retrieved from URL\r\n *\r\n * @param {String} type Dispatch type\r\n * @param {String} url /api/URL to get data from\r\n * @param {Object} data data requested with the url\r\n */export var dispatchHelper=function dispatchHelper(type,url){var data=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};return function(dispatch){return post(\"/api/\".concat(url),data).then(function(p){return dispatch({type:type,payload:p.data});}).catch(function(e){return console.log(e);});};};/**\r\n * If mssg is an array returns first element else returns it as a string.\r\n *\r\n * @param {String} mssg Message value\r\n * @returns { String } Individual string message\r\n */export var ObjectMssg=function ObjectMssg(message){return typeof message==='object'?message.length>0?message[0]:message:message;};/**\r\n * Notifies 'please wait..'\r\n */export var wait=function wait(){return notify({value:'Please wait ...'});};/**\r\n * If loading, then add 'cLoading' class to the specified component which hides it until it is loaded\r\n * @param {Boolean} loading\r\n */export var cLoading=function cLoading(loading){return\"\".concat(loading?'cLoading':'');};/**\r\n * Request a response from an API endpoint.\r\n * @param {String} url Url to get response from\r\n * @param {Object} data Optional data to pass\r\n * @param {String} method Method type. Default is post\r\n */export var APIRequest=function APIRequest(url){var data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var method=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'post';new Promise(function(resolve,reject){axios[method](url,data).then(function(resp){return resolve(resp);}).catch(function(error){return reject(error);});});};","map":{"version":3,"sources":["C:/JavascriptProjects3/instagramClone/client/src/utils/utils.js"],"names":["axios","post","notify","getUserDetails","getMutualUsers","isFollowing","getUserStats","getUserPosts","getGroupPosts","getGroupDetails","joinedGroup","Compress","d","shortener","what","length","parse","parseInt","len","substr","uData","data","uniq","Math","random","toString","slice","randNum","humanReadable","value","text","hr","toggle","el","style","display","capitalizes_first","str","charAt","toUpperCase","removeHr","elements","Array","from","toAll","element","children","map","child","nodeName","remove","viewPassword","input","icon","_input","_icon","getAttr","setAttr","html","css","focus","replacer","filter","elem","regex","on","e","currentTarget","setValue","replace","Me","user","email_verified","ev","isPrivate","accountType","uprivate","imageCompressor","file","Promise","resolve","quality","success","error","err","console","log","message","forProfile","options","username","dispatch","invalidUser","valid","s_username","forGroup","group_id","invalidGroup","bottomScroll","toDom","scrollTop","insta_notify","defaults","to","type","post_id","obj","dispatchHelper","url","then","p","payload","catch","ObjectMssg","wait","cLoading","loading","APIRequest","method","reject","resp"],"mappings":"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","sourcesContent":["import axios,{post} from 'axios';\r\nimport {notify} from '../utils/utilMethods/handy-notification';\r\nimport {getUserDetails,getMutualUsers} from '../actions/user';\r\nimport {isFollowing,getUserStats} from '../actions/follow';\r\nimport {getUserPosts,getGroupPosts} from '../actions/post';\r\nimport {getGroupDetails,joinedGroup} from  '../actions/group';\r\nimport Compress from 'image-compressor.js';\r\nimport d from './api/Dom';\r\n\r\n/**\r\n *  Shortens what with string length\r\n * @param {String} what\r\n * @param {Number} length\r\n */\r\nexport const shortener = (what,length) => {\r\n    let parse = parseInt(length),\r\n    len = what.length;\r\n\r\n    if(!parse){\r\n        return\r\n    }\r\n\r\n    return len >= parse ? `${what.substr(0,length -2)} ..` : (len < parse ? what : null)\r\n}\r\n\r\n/**\r\n * Returns data stored in dataset,(The data() method allows us to attach data of any type \r\n * to DOM elements in a way that is safe from circular)\r\n *  references and therefore from memory leaks.\r\n * @param {String} what Which data\r\n */\r\n export const uData = what => new d('.data').data(what);\r\n\r\n/**\r\n * Returns unique string, useful for key\r\n * the random number we convert to hexdecimal value and with \r\n * slice() start from element in position(i=3,4,5....)\r\n */\r\n export const uniq = () => Math.random().toString(16).slice(2)\r\n\r\n export const randNum = () => Math.random() * 200;\r\n\r\n /**\r\n * Returns human-readable text\r\n *\r\n * @param {Number} value\r\n * @param {String} text\r\n */\r\n export const humanReadable = (value,text) => {\r\n     let hr = value === 0 ? `No ${text}s` : value === 1 ? `1 ${text}` : `${value} ${text}s`\r\n     return hr;\r\n }\r\n\r\n/**\r\n * Toggles the element\r\n * @param {HTMLElement} el element to toggle\r\n */\r\n export const toggle = el => {\r\n     let style = el.style.display;\r\n     style === 'none' ? (style = 'block') : (style = 'none')\r\n }\r\n\r\n /**\r\n * Capitalizes str\r\n * @param {String} str\r\n */\r\n export const capitalizes_first = str => str.charAt(0).toUpperCase() + str.substr(1);\r\n\r\n/**\r\n * Removes hr of last element of modal\r\n */\r\n export const removeHr = () => {\r\n     let elements = Array.from(new d('.modal_items').toAll());\r\n     let element = elements[elements.length -1];\r\n\r\n    return  element ? Array.from(element.children).map(child => \r\n        (child.nodeName === 'hr' ? child.remove() : null)) : null\r\n }\r\n\r\n/**\r\n * Toggle show password\r\n */\r\n export const viewPassword = ({input,icon}) => {\r\n     let _input = new d(input);\r\n     let _icon = new d(icon);\r\n\r\n     if(_input.getAttr('type') === 'password'){\r\n         _input.setAttr('type','text');\r\n         _input.html('<i class=\"fas fa-unlock-alt\"></i>');\r\n         _input.css('color','#e91e63')\r\n     }else{\r\n         _input.setAttr('type','password');\r\n         _icon.html('<i class=\"fas fa-lock\"></i>');\r\n         _icon.css('color','darkturquoise')\r\n     }\r\n     _input.focus()\r\n }\r\n\r\n/**\r\n * For replacing illegal characters\r\n */\r\n export const replacer = (el,filter) => {\r\n     let elem = new d(el);\r\n     let regex = filter === 'normal' ? /[^a-z0-9_.@$#]/i : filter = 'bio' ? /[<>]/i : null;\r\n\r\n     elem.on('keyup', e => {\r\n         let value = e.currentTarget.value;\r\n         elem.setValue(value.replace(regex,''))\r\n     })\r\n }\r\n\r\n /**\r\n * Returns whether it's me\r\n */\r\n export const Me = user => (user === uData('session') ? true : false)\r\n\r\n /**\r\n * Returns whether email is verified\r\n */\r\n export const email_verified = () => {\r\n     let ev = uData('emailVerified');\r\n     return ev === 'yes' ? true : false\r\n }\r\n\r\n/**\r\n * Returns whether user is private\r\n */\r\nexport const isPrivate = (user,isFollowing,accountType) => {\r\n    let uprivate = !Me(user) && !isFollowing && accountType === 'private' ? true : false\r\n    return uprivate;\r\n}\r\n\r\n/**\r\n * Compresses and returns file\r\n * @param {File} file\r\n */\r\n export const imageCompressor = file => {\r\n     return new Promise(resolve => {\r\n         new Compress(file, {\r\n             quality: 0.6,\r\n             success: file => resolve(file),\r\n             error: err => console.log(err.message)\r\n         })\r\n     })\r\n }\r\n\r\n/**\r\n * For profile\r\n */\r\n export const forProfile = async options => {\r\n     let {username,dispatch,invalidUser} = options,\r\n     {data: valid} = await post('/api/is-user-valid',{username}),\r\n     s_username = uData('username');\r\n\r\n     if(!valid){\r\n         invalidUser()\r\n     } else{\r\n         if(username !== s_username){\r\n             dispatch(isFollowing(username));\r\n             dispatch(getMutualUsers(username));\r\n             post('/api/view-profile',{username})\r\n         }\r\n\r\n         dispatch(getUserDetails(username));\r\n         dispatch(getUserStats(username));\r\n         dispatch(getUserPosts(username));\r\n     }\r\n }\r\n\r\n/**\r\n * For group\r\n */\r\n export const forGroup = async options => {\r\n     let {group_id,dispatch,invalidGroup} = options,\r\n     {data: valid} = await post('/api/is-group-valid', {group_id});\r\n\r\n     if(!valid){\r\n         invalidGroup();\r\n     }else{\r\n         dispatch(joinedGroup(group_id));\r\n         dispatch(getGroupDetails(group_id));\r\n         dispatch(getGroupPosts(group_id));\r\n     }\r\n }\r\n\r\n /**\r\n * Scrolls down to 380\r\n */\r\n export const bottomScroll = () => (new d('html','body').toDom().scrollTop = 380)\r\n\r\n/**\r\n * Notifies user [on the notification page]\r\n * @param {Object} options\r\n * @param {Number} options.to\r\n * @param {String} options.type\r\n * @param {Number} options.post_id\r\n * @param {Number} options.group_id\r\n * @param {Number} options.user\r\n */\r\n export const insta_notify = async options => {\r\n     let defaults = {\r\n         to:null,\r\n         type: '',\r\n         post_id: 0,\r\n         group_id: 0,\r\n         user: 0\r\n        };\r\n     let obj = {\r\n         ...defaults,\r\n         ...options\r\n     };\r\n     let {to,type,post_id,group_id,user} = obj;\r\n\r\n\r\n     await post('/api/notify',{to,type,post_id,group_id,user})\r\n }\r\n\r\n /**\r\n * Dispatcher helper for dispatching data retrieved from URL\r\n *\r\n * @param {String} type Dispatch type\r\n * @param {String} url /api/URL to get data from\r\n * @param {Object} data data requested with the url\r\n */\r\n export const dispatchHelper = (type,url,data={}) => {\r\n     return dispatch => post(`/api/${url}`,data)\r\n        .then(p => dispatch({type,payload: p.data}))\r\n        .catch(e => console.log(e))\r\n }\r\n\r\n/**\r\n * If mssg is an array returns first element else returns it as a string.\r\n *\r\n * @param {String} mssg Message value\r\n * @returns { String } Individual string message\r\n */\r\n export const ObjectMssg = message => {\r\n     return typeof message === 'object' ? (message.length > 0 ? message[0] : message) : message;\r\n }\r\n\r\n/**\r\n * Notifies 'please wait..'\r\n */\r\n export const wait = () => notify({value: 'Please wait ...'})\r\n\r\n/**\r\n * If loading, then add 'cLoading' class to the specified component which hides it until it is loaded\r\n * @param {Boolean} loading\r\n */\r\n export const cLoading = loading => `${loading ? 'cLoading' : ''}`\r\n\r\n /**\r\n * Request a response from an API endpoint.\r\n * @param {String} url Url to get response from\r\n * @param {Object} data Optional data to pass\r\n * @param {String} method Method type. Default is post\r\n */\r\n export const APIRequest = (url,data={},method='post') => {\r\n     new Promise((resolve,reject) => {\r\n         axios[method](url,data)\r\n           .then(resp => resolve(resp))\r\n           .catch(error => reject(error))\r\n     })\r\n }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}