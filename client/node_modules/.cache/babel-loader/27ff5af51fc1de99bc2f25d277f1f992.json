{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\JavascriptProjects3\\\\instagramClone\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\JavascriptProjects3\\\\instagramClone\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import{post}from'axios';import{imageCompressor}from'./utils';import{notify}from'../utils/utilMethods/handy-notification';import Action from'./api/Action';/** Upload avatar\r\n * @param {Object} options\r\n * @param {File}   options.file\r\n * @param {String} options.of\r\n * @param {Number} options.group\r\n */export var upload_avatar=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(options){var userFile,of,group,form,file,action,_yield$post,_yield$post$data,success,message;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:userFile=options.file;of=options.of;group=options.group;form=new FormData();_context.next=6;return imageCompressor(userFile);case 6:file=_context.sent;action=new Action('.c_a_add');if(!(file.size>6000000)){_context.next=12;break;}notify({value:'Image should be less than 4Mb'});_context.next=24;break;case 12:action.start('Changing avatar ...');form.append('avatar',file);form.append('of',of);form.append('group',group);_context.next=18;return post('/api/upload-avatar',form);case 18:_yield$post=_context.sent;_yield$post$data=_yield$post.data;success=_yield$post$data.success;message=_yield$post$data.message;notify({value:message,done:function done(){return success?window.location.reload():null;}});//reloads the current URL, like the Refresh button\naction.end('Change avatar');case 24:case\"end\":return _context.stop();}}},_callee);}));return function upload_avatar(_x){return _ref.apply(this,arguments);};}();","map":{"version":3,"sources":["C:/JavascriptProjects3/instagramClone/client/src/utils/avatar-utils.js"],"names":["post","imageCompressor","notify","Action","upload_avatar","options","userFile","file","of","group","form","FormData","action","size","value","start","append","data","success","message","done","window","location","reload","end"],"mappings":"mVAAA,OAAQA,IAAR,KAAmB,OAAnB,CACA,OAAQC,eAAR,KAA8B,SAA9B,CACA,OAAQC,MAAR,KAAqB,yCAArB,CACA,MAAOC,CAAAA,MAAP,KAAmB,cAAnB,CAEA;;;;;GAMC,MAAO,IAAMC,CAAAA,aAAa,0FAAG,iBAAMC,OAAN,sMACdC,QADc,CACOD,OADP,CACpBE,IADoB,CACLC,EADK,CACOH,OADP,CACLG,EADK,CACFC,KADE,CACOJ,OADP,CACFI,KADE,CAErBC,IAFqB,CAEd,GAAIC,CAAAA,QAAJ,EAFc,uBAGRV,CAAAA,eAAe,CAACK,QAAD,CAHP,QAGrBC,IAHqB,eAIrBK,MAJqB,CAIZ,GAAIT,CAAAA,MAAJ,CAAW,UAAX,CAJY,MAMrBI,IAAI,CAACM,IAAL,CAAY,OANS,2BAOpBX,MAAM,CAAC,CAAEY,KAAK,CAAE,+BAAT,CAAD,CAAN,CAPoB,+BASpBF,MAAM,CAACG,KAAP,CAAa,qBAAb,EACAL,IAAI,CAACM,MAAL,CAAY,QAAZ,CAAsBT,IAAtB,EACAG,IAAI,CAACM,MAAL,CAAY,IAAZ,CAAkBR,EAAlB,EACAE,IAAI,CAACM,MAAL,CAAY,OAAZ,CAAqBP,KAArB,EAZoB,uBAckBT,CAAAA,IAAI,CAAC,oBAAD,CAAuBU,IAAvB,CAdtB,gEAcfO,IAde,CAcRC,OAdQ,kBAcRA,OAdQ,CAcAC,OAdA,kBAcAA,OAdA,CAepBjB,MAAM,CAAC,CACHY,KAAK,CAAGK,OADL,CAEHC,IAAI,CAAE,sBAAOF,CAAAA,OAAO,CAAGG,MAAM,CAACC,QAAP,CAAgBC,MAAhB,EAAH,CAA8B,IAA5C,EAFH,CAAD,CAAN,CAGG;AAEHX,MAAM,CAACY,GAAP,CAAW,eAAX,EApBoB,uDAAH,kBAAbpB,CAAAA,aAAa,4CAAnB","sourcesContent":["import {post} from 'axios';\r\nimport {imageCompressor} from './utils';\r\nimport {notify} from '../utils/utilMethods/handy-notification';\r\nimport Action from './api/Action';\r\n\r\n/** Upload avatar\r\n * @param {Object} options\r\n * @param {File}   options.file\r\n * @param {String} options.of\r\n * @param {Number} options.group\r\n */\r\n export const upload_avatar = async options => {\r\n     let {file: userFile,of,group} = options,\r\n         form = new FormData(), //help us sending HTML forms: with or without files, with additional fields and so on\r\n         file = await imageCompressor(userFile),\r\n         action = new Action('.c_a_add')\r\n\r\n      if(file.size > 6000000){\r\n          notify({ value: 'Image should be less than 4Mb'})\r\n      } else{\r\n          action.start('Changing avatar ...');\r\n          form.append('avatar', file);\r\n          form.append('of', of);\r\n          form.append('group', group);\r\n\r\n          let {data: {success,message}} = await post('/api/upload-avatar', form);\r\n          notify({\r\n              value:  message,\r\n              done: () => (success ? window.location.reload() : null)\r\n          }) //reloads the current URL, like the Refresh button\r\n\r\n          action.end('Change avatar')\r\n     }\r\n }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}